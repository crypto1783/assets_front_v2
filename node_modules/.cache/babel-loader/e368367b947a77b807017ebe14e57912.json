{"ast":null,"code":"var _jsxFileName = \"/Users/jianlexia/code/sub/ticket/front/kitties-hw/frontend/src/KittyCards.js\";\nimport React from 'react';\nimport { Card, Grid, Message, Modal, Form, Label } from 'semantic-ui-react';\nimport KittyAvatar from './KittyAvatar';\nimport { TxButton } from './substrate-lib/components';\nimport axios from 'axios';\nimport { Button, Row, Col, Divider, Tag } from \"antd\";\nimport \"antd/dist/antd.css\"; //var request = require('request');\n// --- About Modal ---\n\nconst HisModal = props => {\n  const {\n    kitty,\n    accountPair,\n    setStatus\n  } = props; // request('http://127.0.0.1', function (error, response, body) {\n  //     if (!error && response.statusCode == 200) {\n  //         console.log(response);\n  //         console.log(body); // Print the google web page.\n  //      }\n  // })\n  //https://blog.csdn.net/weixin_43363871/article/details/88857235\n\n  var items;\n  var apiUrl = 'http://127.0.0.1:8080/ticketHis/' + kitty.id;\n  console.log(\"apiUrl = \", apiUrl);\n  axios({\n    method: 'get',\n    url: `${apiUrl}`\n  }).then(response => {\n    console.log(response.data);\n    items = response.data;\n    const listItems = numbers.map(number => /*#__PURE__*/React.createElement(\"li\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 7\n      }\n    }, number));\n  }).catch(error => {\n    console.log(error);\n  });\n  const [open, setOpen] = React.useState(false);\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: () => setOpen(false),\n    onOpen: () => setOpen(true),\n    open: open,\n    trigger: /*#__PURE__*/React.createElement(Button, {\n      basic: true,\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 14\n      }\n    }, \"\\u8BB0\\u5F55\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, \"\\u5386\\u53F2\\u8BB0\\u5F55\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    fluid: true,\n    label: \"ID\",\n    readOnly: true,\n    value: \"history events\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }\n  }, kitty.id))));\n};\n\nconst TransferModal = props => {\n  const {\n    kitty,\n    accountPair,\n    setStatus\n  } = props;\n  const [open, setOpen] = React.useState(false);\n  const [formValue, setFormValue] = React.useState({});\n\n  const formChange = key => (ev, el) => {\n    /* TODO: 加代码 */\n    setFormValue({\n      [key]: el.value\n    });\n  };\n\n  const confirmAndClose = unsub => {\n    unsub();\n    setOpen(false);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: () => setOpen(false),\n    onOpen: () => setOpen(true),\n    open: open,\n    trigger: /*#__PURE__*/React.createElement(Button, {\n      basic: true,\n      color: \"blue\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 14\n      }\n    }, \"\\u8F6C\\u8BA9\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }\n  }, \"\\u8F6C\\u8BA9\"), /*#__PURE__*/React.createElement(Modal.Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(Form.Input, {\n    fluid: true,\n    label: \"ID\",\n    readOnly: true,\n    value: kitty.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Form.Input, {\n    fluid: true,\n    label: \"\\u8F6C\\u8BA9\\u5BF9\\u8C61\",\n    placeholder: \"\\u5BF9\\u65B9\\u5730\\u5740\",\n    onChange: formChange('target'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }\n  }))), /*#__PURE__*/React.createElement(Modal.Actions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    basic: true,\n    color: \"grey\",\n    onClick: () => setOpen(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, \"\\u53D6\\u6D88\"), /*#__PURE__*/React.createElement(TxButton, {\n    accountPair: accountPair,\n    label: \"\\u786E\\u8BA4\\u8F6C\\u8BA9\",\n    type: \"SIGNED-TX\",\n    setStatus: setStatus,\n    onClick: confirmAndClose,\n    attrs: {\n      palletRpc: 'kittiesModule',\n      callable: 'transfer',\n      inputParams: [formValue.target, kitty.id],\n      paramFields: [true, true]\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  })));\n}; // --- About Kitty Card ---\n\n\nconst KittyCard = props => {\n  /*\n    TODO: 加代码。这里会 UI 显示一张 `KittyCard` 是怎么样的。这里会用到：\n    ```\n    <KittyAvatar dna={dna} /> - 来描绘一只猫咪\n    <TransferModal kitty={kitty} accountPair={accountPair} setStatus={setStatus}/> - 来作转让的弹出层\n    ```\n  */\n  const {\n    dna\n  } = props; //把hash字符串转为纯数字，用来获取猫咪特征\n\n  let pureNum = dna ? dna.replace(/[^0-9]/ig, \"\") : '';\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(KittyAvatar, {\n    dna: pureNum,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }));\n};\n\nconst KittyCards = props => {\n  const {\n    kitties,\n    accountPair,\n    setStatus\n  } = props;\n  const kittiesStyle = {\n    padding: \"20px\",\n    marginBottom: \"20px\",\n    borderRadius: \"8px\",\n    boxShadow: \"0px 0px 10px #ddd\"\n  };\n  const textCenter = {\n    textAlign: \"center\"\n  };\n  const inlineText = {\n    wordBreak: \"break-all\",\n    color: \"#999\"\n  };\n  const tagStyle = {\n    position: \"absolute\",\n    right: \"-30px\",\n    top: \"-10px\",\n    borderRadius: \"3px\"\n  };\n  const tagStyle2 = {\n    position: \"absolute\",\n    right: \"-30px\",\n    top: \"20px\",\n    borderRadius: \"3px\"\n  };\n  /* TODO: 加代码。这里会枚举所有的 `KittyCard` */\n\n  return /*#__PURE__*/React.createElement(Row, {\n    justify: \"space-between\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 5\n    }\n  }, kitties.map((item, idx) => {\n    return /*#__PURE__*/React.createElement(Col, {\n      className: \"gutter-row\",\n      style: kittiesStyle,\n      span: 7,\n      key: idx,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, accountPair && accountPair.address == item.owner ? /*#__PURE__*/React.createElement(Tag, {\n      style: tagStyle,\n      color: \"#2db7f5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }, \"\\u6211\\u7684\") : null, item.invalid ? /*#__PURE__*/React.createElement(Tag, {\n      style: tagStyle2,\n      color: \"#b3b3b3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 32\n      }\n    }, \"\\u5931\\u6548\") : null, /*#__PURE__*/React.createElement(KittyCard, {\n      dna: item.dna,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 15\n      }\n    }, \"ID\\u53F7\\uFF1A\", item.id), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 15\n      }\n    }, \"\\u552F\\u4E00\\u7F16\\u7801\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 15\n      }\n    }, item.dna), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 15\n      }\n    }, \"\\u62E5\\u6709\\u8005\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 15\n      }\n    }, item.owner), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    }, \"\\u51FA\\u7968\\u4EBA\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }\n    }, item.creater), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }\n    }, \"\\u9762\\u503C\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, item.price, \" \\u5143\"), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 15\n      }\n    }, \"\\u7236\\u7F16\\u7801\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 15\n      }\n    }, item.preDna), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 15\n      }\n    }, \"\\u662F\\u5426\\u5931\\u6548\\uFF1A\"), /*#__PURE__*/React.createElement(\"div\", {\n      style: inlineText,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 15\n      }\n    }, item.invalid ? '是' : '否'), /*#__PURE__*/React.createElement(Divider, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: textCenter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(TransferModal, {\n      kitty: item,\n      accountPair: accountPair,\n      setStatus: setStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: textCenter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(HisModal, {\n      kitty: item,\n      accountPair: accountPair,\n      setStatus: setStatus,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    })));\n  }));\n};\n\nexport default KittyCards;","map":{"version":3,"sources":["/Users/jianlexia/code/sub/ticket/front/kitties-hw/frontend/src/KittyCards.js"],"names":["React","Card","Grid","Message","Modal","Form","Label","KittyAvatar","TxButton","axios","Button","Row","Col","Divider","Tag","HisModal","props","kitty","accountPair","setStatus","items","apiUrl","id","console","log","method","url","then","response","data","listItems","numbers","map","number","catch","error","open","setOpen","useState","TransferModal","formValue","setFormValue","formChange","key","ev","el","value","confirmAndClose","unsub","palletRpc","callable","inputParams","target","paramFields","KittyCard","dna","pureNum","replace","KittyCards","kitties","kittiesStyle","padding","marginBottom","borderRadius","boxShadow","textCenter","textAlign","inlineText","wordBreak","color","tagStyle","position","right","top","tagStyle2","item","idx","address","owner","invalid","creater","price","preDna"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,EAAeC,IAAf,EAAqBC,OAArB,EAA8BC,KAA9B,EAAqCC,IAArC,EAA2CC,KAA3C,QAAwD,mBAAxD;AAEA,OAAOC,WAAP,MAAwB,eAAxB;AACA,SAASC,QAAT,QAAyB,4BAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,MAAT,EAAiBC,GAAjB,EAAsBC,GAAtB,EAA2BC,OAA3B,EAAoCC,GAApC,QAA+C,MAA/C;AACA,OAAO,oBAAP,C,CACA;AACA;;AAEA,MAAMC,QAAQ,GAAGC,KAAK,IAAG;AACvB,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,WAAT;AAAsBC,IAAAA;AAAtB,MAAoCH,KAA1C,CADuB,CAGvB;AACA;AACA;AACA;AACA;AACA;AAEF;;AACA,MAAII,KAAJ;AACA,MAAIC,MAAM,GAAG,qCAAqCJ,KAAK,CAACK,EAAxD;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,MAAzB;AACAZ,EAAAA,KAAK,CAAC;AAAEgB,IAAAA,MAAM,EAAE,KAAV;AAAiBC,IAAAA,GAAG,EAAG,GAAEL,MAAO;AAAhC,GAAD,CAAL,CACCM,IADD,CACMC,QAAQ,IAAI;AACdL,IAAAA,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACC,IAArB;AACAT,IAAAA,KAAK,GAAGQ,QAAQ,CAACC,IAAjB;AACA,UAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAaC,MAAD,iBAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAKA,MAAL,CADgB,CAAlB;AAIH,GARD,EASCC,KATD,CASQC,KAAD,IAAU;AACjBZ,IAAAA,OAAO,CAACC,GAAR,CAAYW,KAAZ;AACC,GAXD;AAaE,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBrC,KAAK,CAACsC,QAAN,CAAe,KAAf,CAAxB;AACA,sBAAO,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAE,MAAMD,OAAO,CAAC,KAAD,CAA7B;AAAsC,IAAA,MAAM,EAAE,MAAMA,OAAO,CAAC,IAAD,CAA3D;AAAmE,IAAA,IAAI,EAAED,IAAzE;AACL,IAAA,OAAO,eAAE,oBAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,KAAK,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEL,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAFK,eAGL,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAe,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACb,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,KAAK,EAAC,IAAxB;AAA6B,IAAA,QAAQ,MAArC;AAAsC,IAAA,KAAK,EAAE,gBAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa,eAEb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMnB,KAAK,CAACK,EAAZ,CAFa,CAAf,CAHK,CAAP;AAUD,CAtCD;;AAwCA,MAAMiB,aAAa,GAAGvB,KAAK,IAAI;AAC7B,QAAM;AAAEC,IAAAA,KAAF;AAASC,IAAAA,WAAT;AAAsBC,IAAAA;AAAtB,MAAoCH,KAA1C;AACA,QAAM,CAACoB,IAAD,EAAOC,OAAP,IAAkBrC,KAAK,CAACsC,QAAN,CAAe,KAAf,CAAxB;AACA,QAAM,CAACE,SAAD,EAAYC,YAAZ,IAA4BzC,KAAK,CAACsC,QAAN,CAAe,EAAf,CAAlC;;AAEA,QAAMI,UAAU,GAAGC,GAAG,IAAI,CAACC,EAAD,EAAKC,EAAL,KAAY;AACpC;AAEAJ,IAAAA,YAAY,CAAC;AAAE,OAACE,GAAD,GAAOE,EAAE,CAACC;AAAZ,KAAD,CAAZ;AACD,GAJD;;AAMA,QAAMC,eAAe,GAAIC,KAAD,IAAW;AACjCA,IAAAA,KAAK;AACLX,IAAAA,OAAO,CAAC,KAAD,CAAP;AACD,GAHD;;AAKA,sBAAO,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAE,MAAMA,OAAO,CAAC,KAAD,CAA7B;AAAsC,IAAA,MAAM,EAAE,MAAMA,OAAO,CAAC,IAAD,CAA3D;AAAmE,IAAA,IAAI,EAAED,IAAzE;AACL,IAAA,OAAO,eAAE,oBAAC,MAAD;AAAQ,MAAA,KAAK,MAAb;AAAc,MAAA,KAAK,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAEL,oBAAC,KAAD,CAAO,MAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAFK,eAGL,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAe,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACb,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,KAAK,EAAC,IAAxB;AAA6B,IAAA,QAAQ,MAArC;AAAsC,IAAA,KAAK,EAAEnB,KAAK,CAACK,EAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADa,eAEb,oBAAC,IAAD,CAAM,KAAN;AAAY,IAAA,KAAK,MAAjB;AAAkB,IAAA,KAAK,EAAC,0BAAxB;AAA+B,IAAA,WAAW,EAAC,0BAA3C;AAAkD,IAAA,QAAQ,EAAEoB,UAAU,CAAC,QAAD,CAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFa,CAAf,CAHK,eAOL,oBAAC,KAAD,CAAO,OAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,MAAb;AAAc,IAAA,KAAK,EAAC,MAApB;AAA2B,IAAA,OAAO,EAAE,MAAML,OAAO,CAAC,KAAD,CAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE,oBAAC,QAAD;AACE,IAAA,WAAW,EAAEnB,WADf;AAC4B,IAAA,KAAK,EAAC,0BADlC;AACyC,IAAA,IAAI,EAAC,WAD9C;AAC0D,IAAA,SAAS,EAAEC,SADrE;AAEE,IAAA,OAAO,EAAE4B,eAFX;AAGE,IAAA,KAAK,EAAE;AACLE,MAAAA,SAAS,EAAE,eADN;AAELC,MAAAA,QAAQ,EAAE,UAFL;AAGLC,MAAAA,WAAW,EAAE,CAACX,SAAS,CAACY,MAAX,EAAmBnC,KAAK,CAACK,EAAzB,CAHR;AAIL+B,MAAAA,WAAW,EAAE,CAAC,IAAD,EAAO,IAAP;AAJR,KAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAPK,CAAP;AAqBD,CArCD,C,CAwCA;;;AAEA,MAAMC,SAAS,GAAGtC,KAAK,IAAI;AACzB;AACF;AACA;AACA;AACA;AACA;AACA;AAEE,QAAM;AAAEuC,IAAAA;AAAF,MAAUvC,KAAhB,CATyB,CAUzB;;AACA,MAAIwC,OAAO,GAAGD,GAAG,GAACA,GAAG,CAACE,OAAJ,CAAY,UAAZ,EAAwB,EAAxB,CAAD,GAA6B,EAA9C;AAEA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,GAAG,EAAED,OAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAKD,CAlBD;;AAoBA,MAAME,UAAU,GAAG1C,KAAK,IAAI;AAC1B,QAAM;AAAE2C,IAAAA,OAAF;AAAWzC,IAAAA,WAAX;AAAwBC,IAAAA;AAAxB,MAAsCH,KAA5C;AACA,QAAM4C,YAAY,GAAG;AAAEC,IAAAA,OAAO,EAAE,MAAX;AAAmBC,IAAAA,YAAY,EAAE,MAAjC;AAAyCC,IAAAA,YAAY,EAAE,KAAvD;AAA8DC,IAAAA,SAAS,EAAE;AAAzE,GAArB;AACA,QAAMC,UAAU,GAAG;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAAnB;AACA,QAAMC,UAAU,GAAG;AAAEC,IAAAA,SAAS,EAAE,WAAb;AAA0BC,IAAAA,KAAK,EAAE;AAAjC,GAAnB;AACA,QAAMC,QAAQ,GAAG;AAAEC,IAAAA,QAAQ,EAAE,UAAZ;AAAwBC,IAAAA,KAAK,EAAE,OAA/B;AAAwCC,IAAAA,GAAG,EAAE,OAA7C;AAAsDV,IAAAA,YAAY,EAAE;AAApE,GAAjB;AACA,QAAMW,SAAS,GAAG;AAAEH,IAAAA,QAAQ,EAAE,UAAZ;AAAwBC,IAAAA,KAAK,EAAE,OAA/B;AAAwCC,IAAAA,GAAG,EAAE,MAA7C;AAAqDV,IAAAA,YAAY,EAAE;AAAnE,GAAlB;AACA;;AACA,sBACE,oBAAC,GAAD;AAAK,IAAA,OAAO,EAAC,eAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIJ,OAAO,CAAC3B,GAAR,CAAY,CAAC2C,IAAD,EAAOC,GAAP,KAAe;AACzB,wBACE,oBAAC,GAAD;AAAK,MAAA,SAAS,EAAC,YAAf;AAA4B,MAAA,KAAK,EAAEhB,YAAnC;AAAiD,MAAA,IAAI,EAAE,CAAvD;AAA0D,MAAA,GAAG,EAAEgB,GAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI1D,WAAW,IAAIA,WAAW,CAAC2D,OAAZ,IAAuBF,IAAI,CAACG,KAA3C,gBACE,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAER,QAAZ;AAAsB,MAAA,KAAK,EAAC,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,GAEI,IAJR,EAOIK,IAAI,CAACI,OAAL,gBAAe,oBAAC,GAAD;AAAK,MAAA,KAAK,EAAEL,SAAZ;AAAuB,MAAA,KAAK,EAAC,SAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAf,GACI,IARR,eAUE,oBAAC,SAAD;AAAW,MAAA,GAAG,EAAEC,IAAI,CAACpB,GAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAVF,eAWE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAXF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAAUoB,IAAI,CAACrD,EAAf,CAbF,eAcE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAdF,eAeE;AAAK,MAAA,KAAK,EAAE6C,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACpB,GAA9B,CAfF,eAgBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAhBF,eAiBE;AAAK,MAAA,KAAK,EAAEY,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACG,KAA9B,CAjBF,eAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAlBF,eAmBE;AAAK,MAAA,KAAK,EAAEX,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACK,OAA9B,CAnBF,eAoBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BApBF,eAqBE;AAAK,MAAA,KAAK,EAAEb,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACM,KAA9B,YArBF,eAsBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAtBF,eAuBE;AAAK,MAAA,KAAK,EAAEd,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACO,MAA9B,CAvBF,eAwBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAxBF,eAyBE;AAAK,MAAA,KAAK,EAAEf,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAyBQ,IAAI,CAACI,OAAL,GAAa,GAAb,GAAiB,GAA1C,CAzBF,eA0BE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MA1BF,eA2BE;AAAK,MAAA,KAAK,EAAEd,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,aAAD;AAAe,MAAA,KAAK,EAAEU,IAAtB;AAA4B,MAAA,WAAW,EAAEzD,WAAzC;AAAsD,MAAA,SAAS,EAAEC,SAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CA3BF,eA8BE;AAAK,MAAA,KAAK,EAAE8C,UAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,QAAD;AAAU,MAAA,KAAK,EAAEU,IAAjB;AAAuB,MAAA,WAAW,EAAEzD,WAApC;AAAiD,MAAA,SAAS,EAAEC,SAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CA9BF,CADF;AAoCD,GArCD,CAFJ,CADF;AA4CD,CApDD;;AAsDA,eAAeuC,UAAf","sourcesContent":["import React from 'react';\nimport { Card, Grid, Message, Modal, Form, Label } from 'semantic-ui-react';\n\nimport KittyAvatar from './KittyAvatar';\nimport { TxButton } from './substrate-lib/components';\nimport axios from 'axios';\n\nimport { Button, Row, Col, Divider, Tag } from \"antd\";\nimport \"antd/dist/antd.css\";\n//var request = require('request');\n// --- About Modal ---\n\nconst HisModal = props =>{\n  const { kitty, accountPair, setStatus } = props;\n\n  // request('http://127.0.0.1', function (error, response, body) {\n  //     if (!error && response.statusCode == 200) {\n  //         console.log(response);\n  //         console.log(body); // Print the google web page.\n  //      }\n  // })\n\n//https://blog.csdn.net/weixin_43363871/article/details/88857235\nvar items;\nvar apiUrl = 'http://127.0.0.1:8080/ticketHis/' + kitty.id;\nconsole.log(\"apiUrl = \", apiUrl);\naxios({ method: 'get', url: `${apiUrl}` })\n.then(response => {\n    console.log(response.data);\n    items = response.data;\n    const listItems = numbers.map((number) =>\n      <li>{number}</li>\n    );\n\n})\n.catch((error)=> {\nconsole.log(error);\n});\n\n  const [open, setOpen] = React.useState(false);\n  return <Modal onClose={() => setOpen(false)} onOpen={() => setOpen(true)} open={open}\n    trigger={<Button basic color='blue'>记录</Button>}>\n    <Modal.Header>历史记录</Modal.Header>\n    <Modal.Content><Form>\n      <Form.Input fluid label='ID' readOnly value={\"history events\"} />\n      <div>{kitty.id}</div>\n     \n    </Form></Modal.Content>\n    \n  </Modal>;\n}\n\nconst TransferModal = props => {\n  const { kitty, accountPair, setStatus } = props;\n  const [open, setOpen] = React.useState(false);\n  const [formValue, setFormValue] = React.useState({});\n\n  const formChange = key => (ev, el) => {\n    /* TODO: 加代码 */\n\n    setFormValue({ [key]: el.value });\n  };\n\n  const confirmAndClose = (unsub) => {\n    unsub();\n    setOpen(false);\n  };\n\n  return <Modal onClose={() => setOpen(false)} onOpen={() => setOpen(true)} open={open}\n    trigger={<Button basic color='blue'>转让</Button>}>\n    <Modal.Header>转让</Modal.Header>\n    <Modal.Content><Form>\n      <Form.Input fluid label='ID' readOnly value={kitty.id} />\n      <Form.Input fluid label='转让对象' placeholder='对方地址' onChange={formChange('target')} />\n    </Form></Modal.Content>\n    <Modal.Actions>\n      <Button basic color='grey' onClick={() => setOpen(false)}>取消</Button>\n      <TxButton\n        accountPair={accountPair} label='确认转让' type='SIGNED-TX' setStatus={setStatus}\n        onClick={confirmAndClose}\n        attrs={{\n          palletRpc: 'kittiesModule',\n          callable: 'transfer',\n          inputParams: [formValue.target, kitty.id],\n          paramFields: [true, true]\n        }}\n      />\n    </Modal.Actions>\n  </Modal>;\n};\n\n\n// --- About Kitty Card ---\n\nconst KittyCard = props => {\n  /*\n    TODO: 加代码。这里会 UI 显示一张 `KittyCard` 是怎么样的。这里会用到：\n    ```\n    <KittyAvatar dna={dna} /> - 来描绘一只猫咪\n    <TransferModal kitty={kitty} accountPair={accountPair} setStatus={setStatus}/> - 来作转让的弹出层\n    ```\n  */\n\n  const { dna } = props\n  //把hash字符串转为纯数字，用来获取猫咪特征\n  let pureNum = dna?dna.replace(/[^0-9]/ig, \"\"):'';\n\n  return (\n    <div>\n      <KittyAvatar dna={pureNum} />\n    </div>\n  );\n};\n\nconst KittyCards = props => {\n  const { kitties, accountPair, setStatus } = props;\n  const kittiesStyle = { padding: \"20px\", marginBottom: \"20px\", borderRadius: \"8px\", boxShadow: \"0px 0px 10px #ddd\" };\n  const textCenter = { textAlign: \"center\" };\n  const inlineText = { wordBreak: \"break-all\", color: \"#999\" }\n  const tagStyle = { position: \"absolute\", right: \"-30px\", top: \"-10px\", borderRadius: \"3px\" }\n  const tagStyle2 = { position: \"absolute\", right: \"-30px\", top: \"20px\", borderRadius: \"3px\" }\n  /* TODO: 加代码。这里会枚举所有的 `KittyCard` */\n  return (\n    <Row justify=\"space-between\">\n      {\n        kitties.map((item, idx) => {\n          return (\n            <Col className=\"gutter-row\" style={kittiesStyle} span={7} key={idx}>\n              {\n                accountPair && accountPair.address == item.owner ?\n                  <Tag style={tagStyle} color=\"#2db7f5\">我的</Tag>\n                  : null\n              }\n              {\n                item.invalid ? <Tag style={tagStyle2} color=\"#b3b3b3\">失效</Tag>\n                  : null\n              }\n              <KittyCard dna={item.dna} ></KittyCard>\n              <Divider />\n\n              <div>ID号：{item.id}</div>\n              <div>唯一编码：</div>\n              <div style={inlineText}>{item.dna}</div>\n              <div>拥有者：</div>\n              <div style={inlineText}>{item.owner}</div>\n              <div>出票人：</div>\n              <div style={inlineText}>{item.creater}</div>\n              <div>面值：</div>\n              <div style={inlineText}>{item.price} 元</div>\n              <div>父编码：</div>\n              <div style={inlineText}>{item.preDna}</div>\n              <div>是否失效：</div>\n              <div style={inlineText}>{item.invalid?'是':'否'}</div>\n              <Divider />\n              <div style={textCenter}>\n                <TransferModal kitty={item} accountPair={accountPair} setStatus={setStatus} />\n              </div>\n              <div style={textCenter}>\n                <HisModal kitty={item} accountPair={accountPair} setStatus={setStatus} />\n              </div>\n            </Col>\n          )\n        })\n      }\n    </Row>\n  );\n};\n\nexport default KittyCards;\n"]},"metadata":{},"sourceType":"module"}